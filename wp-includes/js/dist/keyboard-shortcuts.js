(function(){"use strict";var __webpack_require__={};!function(){__webpack_require__.d=function(exports,definition){for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});}}};}();!function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}}();!function(){__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};}();var __webpack_exports__={};__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{"ShortcutProvider":function(){return ShortcutProvider;},"__unstableUseShortcutEventMatch":function(){return useShortcutEventMatch;},"store":function(){return store;},"useShortcut":function(){return useShortcut;}});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject);__webpack_require__.d(actions_namespaceObject,{"registerShortcut":function(){return registerShortcut;},"unregisterShortcut":function(){return unregisterShortcut;}});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject);__webpack_require__.d(selectors_namespaceObject,{"getAllShortcutKeyCombinations":function(){return getAllShortcutKeyCombinations;},"getAllShortcutRawKeyCombinations":function(){return getAllShortcutRawKeyCombinations;},"getCategoryShortcuts":function(){return getCategoryShortcuts;},"getShortcutAliases":function(){return getShortcutAliases;},"getShortcutDescription":function(){return getShortcutDescription;},"getShortcutKeyCombination":function(){return getShortcutKeyCombination;},"getShortcutRepresentation":function(){return getShortcutRepresentation;}});;var external_wp_data_namespaceObject=window["wp"]["data"];;var external_lodash_namespaceObject=window["lodash"];;function reducer(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case 'REGISTER_SHORTCUT':return{...state,[action.name]:{category:action.category,keyCombination:action.keyCombination,aliases:action.aliases,description:action.description}};case 'UNREGISTER_SHORTCUT':return(0,external_lodash_namespaceObject.omit)(state,action.name);}
return state;}
var store_reducer=(reducer);;function registerShortcut(_ref){let{name,category,description,keyCombination,aliases}=_ref;return{type:'REGISTER_SHORTCUT',name,category,keyCombination,aliases,description};}
function unregisterShortcut(name){return{type:'UNREGISTER_SHORTCUT',name};};var LEAF_KEY,hasWeakMap;LEAF_KEY={};hasWeakMap=typeof WeakMap!=='undefined';function arrayOf(value){return[value];}
function isObjectLike(value){return!!value&&'object'===typeof value;}
function createCache(){var cache={clear:function(){cache.head=null;},};return cache;}
function isShallowEqual(a,b,fromIndex){var i;if(a.length!==b.length){return false;}
for(i=fromIndex;i<a.length;i++){if(a[i]!==b[i]){return false;}}
return true;}
function rememo(selector,getDependants){var rootCache,getCache;if(!getDependants){getDependants=arrayOf;}
function getRootCache(){return rootCache;}
function getWeakMapCache(dependants){var caches=rootCache,isUniqueByDependants=true,i,dependant,map,cache;for(i=0;i<dependants.length;i++){dependant=dependants[i];if(!isObjectLike(dependant)){isUniqueByDependants=false;break;}
if(caches.has(dependant)){caches=caches.get(dependant);}else{map=new WeakMap();caches.set(dependant,map);caches=map;}}
if(!caches.has(LEAF_KEY)){cache=createCache();cache.isUniqueByDependants=isUniqueByDependants;caches.set(LEAF_KEY,cache);}
return caches.get(LEAF_KEY);}
getCache=hasWeakMap?getWeakMapCache:getRootCache;function clear(){rootCache=hasWeakMap?new WeakMap():createCache();}
function callSelector(){var len=arguments.length,cache,node,i,args,dependants;args=new Array(len);for(i=0;i<len;i++){args[i]=arguments[i];}
dependants=getDependants.apply(null,args);cache=getCache(dependants);if(!cache.isUniqueByDependants){if(cache.lastDependants&&!isShallowEqual(dependants,cache.lastDependants,0)){cache.clear();}
cache.lastDependants=dependants;}
node=cache.head;while(node){if(!isShallowEqual(node.args,args,1)){node=node.next;continue;}
if(node!==cache.head){node.prev.next=node.next;if(node.next){node.next.prev=node.prev;}
node.next=cache.head;node.prev=null;cache.head.prev=node;cache.head=node;}
return node.val;}
node={val:selector.apply(null,args),};args[0]=null;node.args=args;if(cache.head){cache.head.prev=node;node.next=cache.head;}
cache.head=node;return node.val;}
callSelector.getDependants=getDependants;callSelector.clear=clear;clear();return callSelector;};var external_wp_keycodes_namespaceObject=window["wp"]["keycodes"];;const EMPTY_ARRAY=[];const FORMATTING_METHODS={display:external_wp_keycodes_namespaceObject.displayShortcut,raw:external_wp_keycodes_namespaceObject.rawShortcut,ariaLabel:external_wp_keycodes_namespaceObject.shortcutAriaLabel};function getKeyCombinationRepresentation(shortcut,representation){if(!shortcut){return null;}
return shortcut.modifier?FORMATTING_METHODS[representation][shortcut.modifier](shortcut.character):shortcut.character;}
function getShortcutKeyCombination(state,name){return state[name]?state[name].keyCombination:null;}
function getShortcutRepresentation(state,name){let representation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'display';const shortcut=getShortcutKeyCombination(state,name);return getKeyCombinationRepresentation(shortcut,representation);}
function getShortcutDescription(state,name){return state[name]?state[name].description:null;}
function getShortcutAliases(state,name){return state[name]&&state[name].aliases?state[name].aliases:EMPTY_ARRAY;}
const getAllShortcutKeyCombinations=rememo((state,name)=>{return(0,external_lodash_namespaceObject.compact)([getShortcutKeyCombination(state,name),...getShortcutAliases(state,name)]);},(state,name)=>[state[name]]);const getAllShortcutRawKeyCombinations=rememo((state,name)=>{return getAllShortcutKeyCombinations(state,name).map(combination=>getKeyCombinationRepresentation(combination,'raw'));},(state,name)=>[state[name]]);const getCategoryShortcuts=rememo((state,categoryName)=>{return Object.entries(state).filter(_ref=>{let[,shortcut]=_ref;return shortcut.category===categoryName;}).map(_ref2=>{let[name]=_ref2;return name;});},state=>[state]);;const STORE_NAME='core/keyboard-shortcuts';const store=(0,external_wp_data_namespaceObject.createReduxStore)(STORE_NAME,{reducer:store_reducer,actions:actions_namespaceObject,selectors:selectors_namespaceObject});(0,external_wp_data_namespaceObject.register)(store);;var external_wp_element_namespaceObject=window["wp"]["element"];;function useShortcutEventMatch(){const{getAllShortcutKeyCombinations}=(0,external_wp_data_namespaceObject.useSelect)(store);function isMatch(name,event){return getAllShortcutKeyCombinations(name).some(_ref=>{let{modifier,character}=_ref;return external_wp_keycodes_namespaceObject.isKeyboardEvent[modifier](event,character);});}
return isMatch;};const context=(0,external_wp_element_namespaceObject.createContext)();;function useShortcut(name,callback){let{isDisabled}=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const shortcuts=(0,external_wp_element_namespaceObject.useContext)(context);const isMatch=useShortcutEventMatch();const callbackRef=(0,external_wp_element_namespaceObject.useRef)();callbackRef.current=callback;(0,external_wp_element_namespaceObject.useEffect)(()=>{if(isDisabled){return;}
function _callback(event){if(isMatch(name,event)){callbackRef.current(event);}}
shortcuts.current.add(_callback);return()=>{shortcuts.current.delete(_callback);};},[name,isDisabled]);};function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}
return target;};return _extends.apply(this,arguments);};const{Provider}=context;function ShortcutProvider(props){const keyboardShortcuts=(0,external_wp_element_namespaceObject.useRef)(new Set());function onKeyDown(event){if(props.onKeyDown)props.onKeyDown(event);for(const keyboardShortcut of keyboardShortcuts.current){keyboardShortcut(event);}}
return(0,external_wp_element_namespaceObject.createElement)(Provider,{value:keyboardShortcuts},(0,external_wp_element_namespaceObject.createElement)("div",_extends({},props,{onKeyDown:onKeyDown})));};(window.wp=window.wp||{}).keyboardShortcuts=__webpack_exports__;})();